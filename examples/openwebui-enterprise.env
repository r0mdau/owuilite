# OpenWeb UI Enterprise Configuration Example
# This file contains environment variables for enterprise deployments

# ===== Authentication & SSO =====

# Enable OAuth/OIDC
ENABLE_OAUTH_SIGNUP=true
OAUTH_MERGE_ACCOUNTS_BY_EMAIL=true

# Azure AD / Microsoft Entra ID
OAUTH_PROVIDER_NAME="Azure AD"
OAUTH_CLIENT_ID="your_azure_app_id"
OAUTH_CLIENT_SECRET="your_azure_secret"
OAUTH_SCOPES="openid email profile"
OAUTH_AUTHORIZATION_URL="https://login.microsoftonline.com/{tenant_id}/oauth2/v2.0/authorize"
OAUTH_TOKEN_URL="https://login.microsoftonline.com/{tenant_id}/oauth2/v2.0/token"
OAUTH_USERINFO_URL="https://graph.microsoft.com/oidc/userinfo"

# Alternatively: Google Workspace
# OAUTH_PROVIDER_NAME="Google"
# OAUTH_CLIENT_ID="xxxxx.apps.googleusercontent.com"
# OAUTH_CLIENT_SECRET="xxxxx"
# OAUTH_SCOPES="openid email profile"
# OAUTH_AUTHORIZATION_URL="https://accounts.google.com/o/oauth2/v2/auth"
# OAUTH_TOKEN_URL="https://oauth2.googleapis.com/token"
# OAUTH_USERINFO_URL="https://www.googleapis.com/oauth2/v1/userinfo"

# Alternatively: Okta
# OAUTH_PROVIDER_NAME="Okta"
# OAUTH_CLIENT_ID="xxxxx"
# OAUTH_CLIENT_SECRET="xxxxx"
# OAUTH_SCOPES="openid email profile"
# OAUTH_AUTHORIZATION_URL="https://your-domain.okta.com/oauth2/v1/authorize"
# OAUTH_TOKEN_URL="https://your-domain.okta.com/oauth2/v1/token"
# OAUTH_USERINFO_URL="https://your-domain.okta.com/oauth2/v1/userinfo"

# ===== User Management =====

# Disable public signup
ENABLE_SIGNUP=false

# Enable login form
ENABLE_LOGIN_FORM=true

# Default role for new users (pending requires admin approval)
DEFAULT_USER_ROLE=pending

# Enable user management by admins
ENABLE_ADMIN_EXPORT=true

# ===== LiteLLM Integration =====

# LiteLLM proxy URL
OPENAI_API_BASE_URL=http://litellm:4000/v1

# LiteLLM master key
OPENAI_API_KEY=sk-1234

# ===== Database =====

# PostgreSQL connection
DATABASE_URL=postgresql://openwebui:password@postgres:5432/openwebui

# ===== RAG Configuration =====

# Enable RAG features
ENABLE_RAG_WEB_SEARCH=true
ENABLE_RAG_LOCAL_WEB_FETCH=true

# Vector database
VECTOR_DB=qdrant
QDRANT_URI=http://qdrant:6333

# Document processing
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
PDF_EXTRACT_IMAGES=true

# Embedding model
RAG_EMBEDDING_MODEL=text-embedding-3-large
RAG_EMBEDDING_OPENAI_BATCH_SIZE=1

# Search configuration
RAG_TOP_K=5
RAG_RELEVANCE_THRESHOLD=0.5
ENABLE_RAG_HYBRID_SEARCH=true

# Web search engine
RAG_WEB_SEARCH_ENGINE=searxng
RAG_WEB_SEARCH_RESULT_COUNT=5
RAG_WEB_SEARCH_CONCURRENT_REQUESTS=10

# YouTube support
YOUTUBE_LOADER_LANGUAGE=en,fr,es,de

# Reranking
RAG_RERANKING_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2

# Content extraction
CONTENT_EXTRACTION_ENGINE=tika
TIKA_SERVER_URL=http://tika:9998

# RAG template
RAG_TEMPLATE="Use the following context to answer the question. If you cannot answer based on the context, say so.\n\nContext:\n{context}\n\nQuestion: {query}\n\nAnswer:"

# ===== Object Storage (MinIO/S3) =====

# Enable S3 storage
ENABLE_S3_STORAGE=true

# MinIO configuration
S3_ENDPOINT_URL=http://minio:9000
S3_ACCESS_KEY_ID=admin
S3_SECRET_ACCESS_KEY=password
S3_BUCKET_NAME=openwebui
S3_REGION=us-east-1

# ===== Image Generation =====

# Enable image generation
ENABLE_IMAGE_GENERATION=true

# Automatic1111 Stable Diffusion
IMAGE_GENERATION_ENGINE=automatic1111
AUTOMATIC1111_BASE_URL=http://stable-diffusion:7860

# Alternatively: ComfyUI
# IMAGE_GENERATION_ENGINE=comfyui
# COMFYUI_BASE_URL=http://comfyui:8188

# Alternatively: OpenAI DALL-E
# IMAGE_GENERATION_ENGINE=openai
# OPENAI_API_KEY=sk-xxx

# ===== Audio/Speech =====

# Text-to-Speech
AUDIO_TTS_ENGINE=openai
AUDIO_TTS_MODEL=tts-1
AUDIO_TTS_VOICE=alloy

# Speech-to-Text
AUDIO_STT_ENGINE=openai
AUDIO_STT_MODEL=whisper-1

# ===== Model Permissions =====

# Enable model filtering by user
MODEL_FILTER_ENABLED=true

# Model access list (JSON format)
# Format: {"role": ["model1", "model2"], ...}
MODEL_FILTER_LIST='{"admin": ["*"], "user": ["gpt-3.5-turbo", "claude-3-haiku"]}'

# ===== Content Restrictions =====

# Disable public sharing
ENABLE_COMMUNITY_SHARING=false

# Enable private mode (no external requests)
# ENABLE_PRIVATE_MODE=true

# Allowed origins for CORS
# CORS_ALLOWED_ORIGINS=["https://yourdomain.com"]

# ===== Security =====

# Secret key for session management (generate a random string)
WEBUI_SECRET_KEY=changeme_random_secret_key_minimum_32_characters

# JWT expiration (in seconds, 7 days)
JWT_EXPIRES_IN=604800

# Enable HTTPS redirect
# ENABLE_HTTPS_REDIRECT=true

# Content Security Policy
# CONTENT_SECURITY_POLICY="default-src 'self'; ..."

# ===== Logging & Monitoring =====

# Enable audit logging
ENABLE_AUDIT_LOG=true

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Syslog destination for audit logs
# AUDIT_LOG_DESTINATION=syslog://audit-server:514

# ===== Rate Limiting =====

# Enable rate limiting
ENABLE_RATE_LIMIT=true

# Requests per minute per user
RATE_LIMIT_PER_MINUTE=100

# ===== API Keys =====

# Enable API key authentication
ENABLE_API_KEY=true

# Allowed IPs for API access (comma-separated)
# API_KEY_ALLOWED_IPS=10.0.0.0/8,172.16.0.0/12

# ===== MCP (Model Context Protocol) =====

# Enable MCP servers
ENABLE_MCP=true

# MCP configuration file path
MCP_CONFIG_PATH=/app/backend/data/mcp-config.json

# ===== Performance =====

# Number of worker processes
WORKERS=4

# Worker class (sync, async, gevent)
WORKER_CLASS=uvicorn.workers.UvicornWorker

# Worker timeout (seconds)
TIMEOUT=600

# Keep-alive timeout
KEEP_ALIVE=5

# ===== Data Storage =====

# Data directory
DATA_DIR=/app/backend/data

# Upload directory
UPLOAD_DIR=/app/backend/data/uploads

# Max file size (in bytes, 50MB)
MAX_FILE_SIZE=52428800

# ===== Compliance =====

# Enable data retention policy
# DATA_RETENTION_DAYS=365

# Enable GDPR features
# ENABLE_GDPR_FEATURES=true

# Enable export functionality
ENABLE_USER_DATA_EXPORT=true

# ===== Custom Branding =====

# Application name
WEBUI_NAME="Enterprise AI Assistant"

# Custom logo URL
# CUSTOM_LOGO_URL=https://yourdomain.com/logo.png

# Custom theme colors
# PRIMARY_COLOR=#1e40af
# SECONDARY_COLOR=#3b82f6

# ===== Advanced Settings =====

# Enable experimental features
# ENABLE_EXPERIMENTAL_FEATURES=false

# Disable telemetry
ENABLE_TELEMETRY=false

# Custom CSS
# CUSTOM_CSS_URL=https://yourdomain.com/custom.css

# Custom JavaScript
# CUSTOM_JS_URL=https://yourdomain.com/custom.js
